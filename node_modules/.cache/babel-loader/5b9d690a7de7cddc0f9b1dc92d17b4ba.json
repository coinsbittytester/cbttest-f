{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/kabam/OneDrive/Desktop/NUI/TINVS/ttest-1-f/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/kabam/OneDrive/Desktop/NUI/TINVS/ttest-1-f/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{useCallback}from'react';import{useWallet}from'@binance-chain/bsc-use-wallet';import{useDispatch}from'react-redux';import{fetchFarmUserDataAsync,updateUserStakedBalance,updateUserBalance,updateUserPendingReward}from'state/actions';import{unstake,sousUnstake,sousEmegencyUnstake}from'utils/callHelpers';import{useMasterchef,useSousChef}from'./useContract';var decimals;var useUnstake=function useUnstake(pid){decimals=18;if(pid===5)decimals=9;console.log(pid);console.log(decimals);var dispatch=useDispatch();var _useWallet=useWallet(),account=_useWallet.account;var masterChefContract=useMasterchef();var handleUnstake=useCallback(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(amount){var txHash;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return unstake(masterChefContract,pid,amount,account,decimals);case 2:txHash=_context.sent;dispatch(fetchFarmUserDataAsync(account));console.info(txHash);case 5:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}(),[account,dispatch,masterChefContract,pid]);return{onUnstake:handleUnstake};};var SYRUPIDS=[5,6,3,1,22,23];export var useSousUnstake=function useSousUnstake(sousId,dec){decimals=dec;var dispatch=useDispatch();var _useWallet2=useWallet(),account=_useWallet2.account;var masterChefContract=useMasterchef();var sousChefContract=useSousChef(sousId);var isOldSyrup=SYRUPIDS.includes(sousId);var handleUnstake=useCallback(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(amount){var txHash,_txHash,_txHash2;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(sousId===0)){_context2.next=7;break;}_context2.next=3;return unstake(masterChefContract,0,amount,account,decimals);case 3:txHash=_context2.sent;console.info(txHash);_context2.next=18;break;case 7:if(!isOldSyrup){_context2.next=14;break;}_context2.next=10;return sousEmegencyUnstake(sousChefContract,amount,account);case 10:_txHash=_context2.sent;console.info(_txHash);_context2.next=18;break;case 14:_context2.next=16;return sousUnstake(sousChefContract,amount,account,decimals);case 16:_txHash2=_context2.sent;console.info(_txHash2);case 18:dispatch(updateUserStakedBalance(sousId,account));dispatch(updateUserBalance(sousId,account));dispatch(updateUserPendingReward(sousId,account));case 21:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}(),[account,dispatch,isOldSyrup,masterChefContract,sousChefContract,sousId]);decimals=18;return{onUnstake:handleUnstake};};export default useUnstake;","map":{"version":3,"sources":["C:/Users/kabam/OneDrive/Desktop/NUI/TINVS/ttest-1-f/src/hooks/useUnstake.ts"],"names":["useCallback","useWallet","useDispatch","fetchFarmUserDataAsync","updateUserStakedBalance","updateUserBalance","updateUserPendingReward","unstake","sousUnstake","sousEmegencyUnstake","useMasterchef","useSousChef","decimals","useUnstake","pid","console","log","dispatch","account","masterChefContract","handleUnstake","amount","txHash","info","onUnstake","SYRUPIDS","useSousUnstake","sousId","dec","sousChefContract","isOldSyrup","includes"],"mappings":"iVAAA,OAASA,WAAT,KAA4B,OAA5B,CACA,OAASC,SAAT,KAA0B,+BAA1B,CACA,OAASC,WAAT,KAA4B,aAA5B,CACA,OACEC,sBADF,CAEEC,uBAFF,CAGEC,iBAHF,CAIEC,uBAJF,KAKO,eALP,CAMA,OAASC,OAAT,CAAkBC,WAAlB,CAA+BC,mBAA/B,KAA0D,mBAA1D,CACA,OAASC,aAAT,CAAwBC,WAAxB,KAA2C,eAA3C,CAEA,GAAIC,CAAAA,QAAJ,CACA,GAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAACC,GAAD,CAAiB,CAClCF,QAAQ,CAAG,EAAX,CACA,GAAGE,GAAG,GAAK,CAAX,CACEF,QAAQ,CAAG,CAAX,CAEFG,OAAO,CAACC,GAAR,CAAYF,GAAZ,EACAC,OAAO,CAACC,GAAR,CAAYJ,QAAZ,EACA,GAAMK,CAAAA,QAAQ,CAAGf,WAAW,EAA5B,CAPkC,eAQdD,SAAS,EARK,CAQ1BiB,OAR0B,YAQ1BA,OAR0B,CASlC,GAAMC,CAAAA,kBAAkB,CAAGT,aAAa,EAAxC,CAEA,GAAMU,CAAAA,aAAa,CAAGpB,WAAW,0FAC/B,iBAAOqB,MAAP,mJACuBd,CAAAA,OAAO,CAACY,kBAAD,CAAqBL,GAArB,CAA0BO,MAA1B,CAAkCH,OAAlC,CAA2CN,QAA3C,CAD9B,QACQU,MADR,eAEEL,QAAQ,CAACd,sBAAsB,CAACe,OAAD,CAAvB,CAAR,CACAH,OAAO,CAACQ,IAAR,CAAaD,MAAb,EAHF,sDAD+B,+DAM/B,CAACJ,OAAD,CAAUD,QAAV,CAAoBE,kBAApB,CAAwCL,GAAxC,CAN+B,CAAjC,CASA,MAAO,CAAEU,SAAS,CAAEJ,aAAb,CAAP,CACD,CArBD,CAuBA,GAAMK,CAAAA,QAAQ,CAAG,CAAC,CAAD,CAAI,CAAJ,CAAO,CAAP,CAAU,CAAV,CAAa,EAAb,CAAiB,EAAjB,CAAjB,CAEA,MAAO,IAAMC,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAACC,MAAD,CAASC,GAAT,CAAiB,CAC7ChB,QAAQ,CAAGgB,GAAX,CACA,GAAMX,CAAAA,QAAQ,CAAGf,WAAW,EAA5B,CAF6C,gBAGzBD,SAAS,EAHgB,CAGrCiB,OAHqC,aAGrCA,OAHqC,CAI7C,GAAMC,CAAAA,kBAAkB,CAAGT,aAAa,EAAxC,CACA,GAAMmB,CAAAA,gBAAgB,CAAGlB,WAAW,CAACgB,MAAD,CAApC,CACA,GAAMG,CAAAA,UAAU,CAAGL,QAAQ,CAACM,QAAT,CAAkBJ,MAAlB,CAAnB,CAEA,GAAMP,CAAAA,aAAa,CAAGpB,WAAW,2FAC/B,kBAAOqB,MAAP,uJACMM,MAAM,GAAK,CADjB,kDAEyBpB,CAAAA,OAAO,CAACY,kBAAD,CAAqB,CAArB,CAAwBE,MAAxB,CAAgCH,OAAhC,CAAyCN,QAAzC,CAFhC,QAEUU,MAFV,gBAGIP,OAAO,CAACQ,IAAR,CAAaD,MAAb,EAHJ,mCAIaQ,UAJb,mDAKyBrB,CAAAA,mBAAmB,CAACoB,gBAAD,CAAmBR,MAAnB,CAA2BH,OAA3B,CAL5C,SAKUI,OALV,gBAMIP,OAAO,CAACQ,IAAR,CAAaD,OAAb,EANJ,wDAQyBd,CAAAA,WAAW,CAACqB,gBAAD,CAAmBR,MAAnB,CAA2BH,OAA3B,CAAoCN,QAApC,CARpC,SAQUU,QARV,gBASIP,OAAO,CAACQ,IAAR,CAAaD,QAAb,EATJ,QAWEL,QAAQ,CAACb,uBAAuB,CAACuB,MAAD,CAAST,OAAT,CAAxB,CAAR,CACAD,QAAQ,CAACZ,iBAAiB,CAACsB,MAAD,CAAST,OAAT,CAAlB,CAAR,CACAD,QAAQ,CAACX,uBAAuB,CAACqB,MAAD,CAAST,OAAT,CAAxB,CAAR,CAbF,yDAD+B,iEAgB/B,CAACA,OAAD,CAAUD,QAAV,CAAoBa,UAApB,CAAgCX,kBAAhC,CAAoDU,gBAApD,CAAsEF,MAAtE,CAhB+B,CAAjC,CAkBAf,QAAQ,CAAG,EAAX,CACA,MAAO,CAAEY,SAAS,CAAEJ,aAAb,CAAP,CACD,CA5BM,CA8BP,cAAeP,CAAAA,UAAf","sourcesContent":["import { useCallback } from 'react'\r\nimport { useWallet } from '@binance-chain/bsc-use-wallet'\r\nimport { useDispatch } from 'react-redux'\r\nimport {\r\n  fetchFarmUserDataAsync,\r\n  updateUserStakedBalance,\r\n  updateUserBalance,\r\n  updateUserPendingReward,\r\n} from 'state/actions'\r\nimport { unstake, sousUnstake, sousEmegencyUnstake } from 'utils/callHelpers'\r\nimport { useMasterchef, useSousChef } from './useContract'\r\n\r\nlet decimals\r\nconst useUnstake = (pid: number) => {\r\n  decimals = 18\r\n  if(pid === 5)\r\n    decimals = 9\r\n  \r\n  console.log(pid)\r\n  console.log(decimals)\r\n  const dispatch = useDispatch()\r\n  const { account } = useWallet()\r\n  const masterChefContract = useMasterchef()\r\n\r\n  const handleUnstake = useCallback(\r\n    async (amount: string) => {\r\n      const txHash = await unstake(masterChefContract, pid, amount, account, decimals)\r\n      dispatch(fetchFarmUserDataAsync(account))\r\n      console.info(txHash)\r\n    },\r\n    [account, dispatch, masterChefContract, pid],\r\n  )\r\n\r\n  return { onUnstake: handleUnstake }\r\n}\r\n\r\nconst SYRUPIDS = [5, 6, 3, 1, 22, 23]\r\n\r\nexport const useSousUnstake = (sousId, dec) => {\r\n  decimals = dec\r\n  const dispatch = useDispatch()\r\n  const { account } = useWallet()\r\n  const masterChefContract = useMasterchef()\r\n  const sousChefContract = useSousChef(sousId)\r\n  const isOldSyrup = SYRUPIDS.includes(sousId)\r\n\r\n  const handleUnstake = useCallback(\r\n    async (amount: string) => {\r\n      if (sousId === 0) {\r\n        const txHash = await unstake(masterChefContract, 0, amount, account, decimals)\r\n        console.info(txHash)\r\n      } else if (isOldSyrup) {\r\n        const txHash = await sousEmegencyUnstake(sousChefContract, amount, account)\r\n        console.info(txHash)\r\n      } else {\r\n        const txHash = await sousUnstake(sousChefContract, amount, account, decimals)\r\n        console.info(txHash)\r\n      }\r\n      dispatch(updateUserStakedBalance(sousId, account))\r\n      dispatch(updateUserBalance(sousId, account))\r\n      dispatch(updateUserPendingReward(sousId, account))\r\n    },\r\n    [account, dispatch, isOldSyrup, masterChefContract, sousChefContract, sousId],\r\n  )\r\n  decimals = 18  \r\n  return { onUnstake: handleUnstake }\r\n}\r\n\r\nexport default useUnstake\r\n"]},"metadata":{},"sourceType":"module"}